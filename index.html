<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TARIFUL ISLAM</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&display=swap');
*{margin:0;padding:0;box-sizing:border-box;font-family:'Google Sans',sans-serif}
body{background:#1a110f;color:#efdbd5;min-height:100vh}

/* Common */
.hidden{display:none}
button{cursor:pointer}

/* Home */
#home{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;gap:15px}
.menu{width:85%;max-width:400px;padding:22px;border-radius:20px;font-size:1.1rem;font-weight:bold;border:none}
.qr{background:#553f38;color:#fff}
.calc{background:#8b442d;color:#fff}
.video{background:#2e4d3c;color:#d0ffda}
.history{background:#352d2b;color:#f7e3a0}

/* Section */
.section{display:none;padding:15px}
.header{display:flex;justify-content:space-between;margin-bottom:10px}
.back{background:#352d2b;color:#fff;border:none;padding:8px 18px;border-radius:25px}

/* QR */
#scanner{max-width:400px;margin:auto;border-radius:15px;overflow:hidden}
.file-btn{margin-top:15px;padding:15px;border:1px dashed #f7e3a0;border-radius:15px;text-align:center}
.result{margin-top:15px;background:#2a1f1d;padding:15px;border-radius:15px;word-break:break-all}

/* Video */
#player-wrap{display:none;background:#000;border-radius:15px;overflow:hidden}
video{width:100%}
.controls{display:flex;justify-content:center;gap:25px;padding:10px}
.ctrl{font-size:1.6rem;background:none;border:none;color:white}
.video-list{margin-top:15px}
.video-item{padding:12px;background:#2a1f1d;margin-bottom:8px;border-radius:12px}

/* Calculator */
.calc-box{max-width:360px;margin:auto}
.screen{height:100px;font-size:2.5rem;text-align:right;padding:10px}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.btn{height:65px;border-radius:50%;border:none;font-size:1.3rem}
.num{background:#352d2b;color:white}
.func{background:#553f38;color:white}
.ac{background:#8b442d;color:white}
.eq{background:#f7e3a0;color:#3e2e00;border-radius:30px}
</style>
</head>

<body>

<!-- HOME -->
<div id="home">
<button class="menu qr" onclick="openSec('qrSec')">üì∑ QR Tool</button>
<button class="menu video" onclick="openSec('videoSec')">üé¨ Video Player</button>
<button class="menu calc" onclick="openSec('calcSec')">üßÆ Calculator</button>
<button class="menu history" onclick="openHistory()">üìú History</button>
</div>

<!-- QR -->
<div id="qrSec" class="section">
<div class="header">
<button class="back" onclick="goHome()">‚Üê Back</button>
<button class="back" onclick="openSec('scanSec')">Scan</button>
</div>

<input id="qrText" placeholder="Enter text or link"
style="width:100%;padding:12px;border-radius:12px;background:#2a1f1d;color:white;border:2px solid #553f38"
oninput="makeQR()">

<div id="qrBox" style="margin-top:15px;background:white;padding:15px;border-radius:15px"></div>
</div>

<!-- SCAN -->
<div id="scanSec" class="section">
<div class="header"><button class="back" onclick="openSec('qrSec')">‚Üê Back</button></div>
<div id="scanner"></div>
<label class="file-btn" for="imgQR">üñºÔ∏è Gallery</label>
<input type="file" id="imgQR" accept="image/*" hidden>
<div class="result" id="scanRes">Waiting...</div>
</div>

<!-- VIDEO -->
<div id="videoSec" class="section">
<div class="header"><button class="back" onclick="goHome()">‚Üê Back</button></div>

<div id="player-wrap">
<video id="video" controls></video>
<div class="controls">
<button class="ctrl" onclick="prev()">‚èÆ</button>
<button class="ctrl" onclick="toggle()">‚ñ∂</button>
<button class="ctrl" onclick="next()">‚è≠</button>
</div>
</div>

<input type="file" multiple accept="video/*" onchange="loadVideos(event)"
style="margin-top:15px">

<div class="video-list" id="vList"></div>
</div>

<!-- CALC -->
<div id="calcSec" class="section">
<div class="header"><button class="back" onclick="goHome()">‚Üê Back</button></div>
<div class="calc-box">
<div class="screen" id="disp">0</div>
<div class="grid">
<button class="btn ac" onclick="clr()">AC</button>
<button class="btn func" onclick="add('/')">√∑</button>
<button class="btn func" onclick="add('*')">√ó</button>
<button class="btn num" onclick="bk()">‚å´</button>
<button class="btn num" onclick="add('7')">7</button>
<button class="btn num" onclick="add('8')">8</button>
<button class="btn num" onclick="add('9')">9</button>
<button class="btn func" onclick="add('-')">‚àí</button>
<button class="btn num" onclick="add('4')">4</button>
<button class="btn num" onclick="add('5')">5</button>
<button class="btn num" onclick="add('6')">6</button>
<button class="btn func" onclick="add('+')">+</button>
<button class="btn num" onclick="add('1')">1</button>
<button class="btn num" onclick="add('2')">2</button>
<button class="btn num" onclick="add('3')">3</button>
<button class="btn eq" onclick="calc()">=</button>
<button class="btn num" style="grid-column:span 2;border-radius:40px" onclick="add('0')">0</button>
<button class="btn num" onclick="add('.')">.</button>
</div>
</div>
</div>

<!-- HISTORY -->
<div id="hisSec" class="section">
<div class="header"><button class="back" onclick="goHome()">‚Üê Back</button></div>
<div id="hisBox"></div>
</div>

<script>
const home=document.getElementById("home");
const secs=document.querySelectorAll(".section");

/* Navigation */
function openSec(id){
home.style.display="none";
secs.forEach(s=>s.style.display="none");
document.getElementById(id).style.display="block";
if(id==="scanSec")startScan();else stopScan();
}
function goHome(){
home.style.display="flex";
secs.forEach(s=>s.style.display="none");
stopScan();
}

/* QR */
const qr=new QRCode(document.getElementById("qrBox"),{width:200,height:200});
function makeQR(){qr.clear();if(qrText.value)qr.makeCode(qrText.value)}

/* Scanner */
let qrScan;
function startScan(){
qrScan=new Html5Qrcode("scanner");
qrScan.start({facingMode:"environment"},{fps:10,qrbox:250},
t=>{scanRes.innerText=t;save("QR",t);}
);
}
function stopScan(){if(qrScan?.isScanning)qrScan.stop()}
imgQR.onchange=e=>{
let f=e.target.files[0];if(!f)return;
qrScan.scanFile(f,true).then(t=>{scanRes.innerText=t;save("QR",t)})
.catch(()=>scanRes.innerText="‚ùå Detect ‡¶π‡ßü‡¶®‡¶ø");
}

/* Video */
let vids=[],i=0;
function loadVideos(e){
vids=[...e.target.files];
vList.innerHTML="";
vids.forEach((v,idx)=>{
let d=document.createElement("div");
d.className="video-item";
d.innerText=v.name;
d.onclick=()=>play(idx);
vList.appendChild(d);
});
}
function play(x){
i=x;
video.src=URL.createObjectURL(vids[i]);
player-wrap.style.display="block";
video.play();
save("Video",vids[i].name);
}
function toggle(){video.paused?video.play():video.pause()}
function next(){if(i<vids.length-1)play(i+1)}
function prev(){if(i>0)play(i-1)}

/* Calculator */
function add(v){disp.innerText=disp.innerText==="0"?v:disp.innerText+v}
function clr(){disp.innerText="0"}
function bk(){disp.innerText=disp.innerText.length>1?disp.innerText.slice(0,-1):"0"}
function calc(){try{disp.innerText=eval(disp.innerText)}catch{disp.innerText="Error"}}

/* History */
function save(t,c){
let h=JSON.parse(localStorage.getItem("his")||"[]");
h.unshift(t+": "+c);
localStorage.setItem("his",JSON.stringify(h.slice(0,20)));
}
function openHistory(){
openSec("hisSec");
hisBox.innerHTML=(JSON.parse(localStorage.getItem("his")||"[]")).join("<br>")||"Empty";
}
</script>

</body>
</html>
