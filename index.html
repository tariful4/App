<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TARIFUL ISLAM</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:sans-serif}
body{background:#1a110f;color:#efdbd5}

/* Home */
#home{height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:15px}
.menu{width:85%;max-width:400px;padding:20px;border:none;border-radius:18px;font-size:1.1rem;font-weight:bold;cursor:pointer}
.video{background:#2e4d3c;color:#d0ffda}
.calc{background:#8b442d;color:#ffdad0}

/* Sections */
.section{display:none;padding:15px}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.back{background:#352d2b;color:#fff;border:none;padding:8px 18px;border-radius:25px;cursor:pointer}

/* New History Toggle Button */
.hist-btn-main {
    background: #8b442d;
    color: #fff;
    border: none;
    padding: 8px 20px;
    border-radius: 20px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}

/* Video */
#playerBox{display:none;margin-bottom:10px}
video{width:100%;border-radius:12px}
.video-item{padding:10px;background:#2a1f1d;border-radius:10px;margin-top:8px;cursor:pointer}

/* Calculator */
.calc-box{max-width:360px;margin:auto}
.screen{height:90px;font-size:2.2rem;text-align:right;padding:10px;overflow:hidden;background:#2a1f1d;border-radius:15px;margin-bottom:15px}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.btn{height:60px;border:none;border-radius:50%;font-size:1.2rem;cursor:pointer}
.num{background:#352d2b;color:white}
.func{background:#553f38;color:white}
.ac{background:#8b442d;color:white}
.eq{background:#f7e3a0;color:#3e2e00;border-radius:30px}

/* History Panel */
#historyPanel {
    display: none;
    margin-top: 20px;
    max-width: 360px;
    margin: auto;
    background: #2a1f1d;
    padding: 15px;
    border-radius: 15px;
    border: 1px solid #553f38;
}
.hist-header{display:flex;justify-content:space-between;margin-bottom:10px;font-size:0.9rem;border-bottom:1px solid #553f38;padding-bottom:5px}
#histList{max-height:150px;overflow-y:auto;font-size:1rem}
.hist-item{padding:8px 0;border-bottom:1px solid #352d2b;color: #efdbd5}
.clear-hist{background:none;border:none;color:#ff8b8b;cursor:pointer;font-weight:bold}
</style>
</head>

<body>

<div id="home">
    <button class="menu video" onclick="openSec('videoSec')">üé¨ Video Player</button>
    <button class="menu calc" onclick="openSec('calcSec')">üßÆ Calculator</button>
</div>

<div id="videoSec" class="section">
    <div class="header">
        <button class="back" onclick="goHome()">‚Üê Back</button>
        <h3 style="color:#d0ffda">Video Player</h3>
    </div>
    <div id="playerBox"><video id="video" controls></video></div>
    <input type="file" multiple accept="video/*" onchange="loadVideos(event)" style="margin-bottom:15px">
    <div id="videoList"></div>
</div>

<div id="calcSec" class="section">
    <div class="header">
        <button class="back" onclick="goHome()">‚Üê Back</button>
        <button class="hist-btn-main" onclick="toggleHistory()">History üïí</button>
    </div>

    <div class="calc-box">
        <div class="screen" id="disp">0</div>
        <div class="grid">
            <button class="btn ac" onclick="clr()">AC</button>
            <button class="btn func" onclick="add('/')">√∑</button>
            <button class="btn func" onclick="add('*')">√ó</button>
            <button class="btn num" onclick="bk()">‚å´</button>

            <button class="btn num" onclick="add('7')">7</button>
            <button class="btn num" onclick="add('8')">8</button>
            <button class="btn num" onclick="add('9')">9</button>
            <button class="btn func" onclick="add('-')">‚àí</button>

            <button class="btn num" onclick="add('4')">4</button>
            <button class="btn num" onclick="add('5')">5</button>
            <button class="btn num" onclick="add('6')">6</button>
            <button class="btn func" onclick="add('+')">+</button>

            <button class="btn num" onclick="add('1')">1</button>
            <button class="btn num" onclick="add('2')">2</button>
            <button class="btn num" onclick="add('3')">3</button>
            <button class="btn eq" onclick="calc()">=</button>

            <button class="btn num" style="grid-column:span 2;border-radius:40px" onclick="add('0')">0</button>
            <button class="btn num" onclick="add('.')">.</button>
        </div>
    </div>

    <div id="historyPanel">
        <div class="hist-header">
            <span>Saved History</span>
            <button class="clear-hist" onclick="clearHistory()">Clear All</button>
        </div>
        <div id="histList"></div>
    </div>
</div>

<script>
/* Navigation */
function openSec(id){
    document.getElementById("home").style.display="none";
    document.querySelectorAll(".section").forEach(s=>s.style.display="none");
    document.getElementById(id).style.display="block";
    if(id === 'calcSec') loadHistoryFromStorage();
}

function goHome(){
    document.getElementById("home").style.display="flex";
    document.querySelectorAll(".section").forEach(s=>s.style.display="none");
    document.getElementById("video").pause();
}

/* Video Player logic (Suroo thkei chilo) */
let videos=[];
function loadVideos(e){
    videos=[...e.target.files];
    let list=document.getElementById("videoList");
    list.innerHTML="";
    videos.forEach((v,i)=>{
        let d=document.createElement("div");
        d.className="video-item";
        d.innerText=v.name;
        d.onclick=()=>playVideo(i);
        list.appendChild(d);
    });
}
function playVideo(i){
    let v=document.getElementById("video");
    v.src=URL.createObjectURL(videos[i]);
    document.getElementById("playerBox").style.display="block";
    v.play();
}

/* Calculator Logic */
function add(v){
    let d=document.getElementById("disp");
    if(d.innerText === "0" || d.innerText === "Error") d.innerText = v;
    else d.innerText += v;
}
function clr(){document.getElementById("disp").innerText="0";}
function bk(){
    let d=document.getElementById("disp");
    d.innerText=d.innerText.length>1?d.innerText.slice(0,-1):"0";
}

function calc(){
    let d=document.getElementById("disp");
    let expression = d.innerText;
    try{
        let result = eval(expression.replace('√ó', '*').replace('√∑', '/').replace('‚àí', '-'));
        if(expression !== result.toString()){
            saveToStorage(expression + " = " + result);
        }
        d.innerText = result;
    }catch{
        d.innerText = "Error";
    }
}

/* History with Local Storage (Phone a save thakbe) */
function toggleHistory() {
    let panel = document.getElementById("historyPanel");
    panel.style.display = (panel.style.display === "block") ? "none" : "block";
}

function saveToStorage(item) {
    let history = JSON.parse(localStorage.getItem("calcHistory") || "[]");
    history.unshift(item); // Notun ta shurute thakbe
    if(history.length > 50) history.pop(); // Max 50 ta save thakbe
    localStorage.setItem("calcHistory", JSON.stringify(history));
    renderHistory();
}

function loadHistoryFromStorage() {
    renderHistory();
}

function renderHistory() {
    let history = JSON.parse(localStorage.getItem("calcHistory") || "[]");
    let list = document.getElementById("histList");
    list.innerHTML = "";
    history.forEach(item => {
        let div = document.createElement("div");
        div.className = "hist-item";
        div.innerText = item;
        list.appendChild(div);
    });
}

function clearHistory(){
    localStorage.removeItem("calcHistory");
    renderHistory();
}

// App load houyar somoy history load hobe
window.onload = loadHistoryFromStorage;
</script>

</body>
</html>
