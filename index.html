<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TARIFUL ISLAM</title>

<!-- Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:sans-serif}
body{background:#1a110f;color:#efdbd5}

/* Home */
#home{height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:15px}
.menu{width:85%;max-width:400px;padding:20px;border:none;border-radius:18px;font-size:1.1rem;font-weight:bold}
.qr{background:#553f38;color:#fff}
.video{background:#2e4d3c;color:#d0ffda}
.calc{background:#8b442d;color:#ffdad0}

/* Sections */
.section{display:none;padding:15px}
.header{display:flex;justify-content:space-between;margin-bottom:10px}
.back{background:#352d2b;color:#fff;border:none;padding:8px 18px;border-radius:25px}

/* QR */
#scanner{max-width:400px;margin:auto;border-radius:15px;overflow:hidden}
.file-btn{margin-top:15px;padding:15px;border:1px dashed #f7e3a0;border-radius:15px;text-align:center}
.result{margin-top:15px;background:#2a1f1d;padding:15px;border-radius:15px;word-break:break-all}

/* Video */
#playerBox{display:none;margin-bottom:10px}
video{width:100%;border-radius:12px}
.video-item{padding:10px;background:#2a1f1d;border-radius:10px;margin-top:8px}

/* Calculator */
.calc-box{max-width:360px;margin:auto}
.screen{height:90px;font-size:2.2rem;text-align:right;padding:10px}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.btn{height:60px;border:none;border-radius:50%;font-size:1.2rem}
.num{background:#352d2b;color:white}
.func{background:#553f38;color:white}
.ac{background:#8b442d;color:white}
.eq{background:#f7e3a0;color:#3e2e00;border-radius:30px}
</style>
</head>

<body>

<!-- HOME -->
<div id="home">
<button class="menu qr" onclick="openSec('qrSec')">üì∑ QR Tool</button>
<button class="menu video" onclick="openSec('videoSec')">üé¨ Video Player</button>
<button class="menu calc" onclick="openSec('calcSec')">üßÆ Calculator</button>
</div>

<!-- QR TOOL -->
<div id="qrSec" class="section">
<div class="header">
<button class="back" onclick="goHome()">‚Üê Back</button>
<button class="back" onclick="openSec('scanSec')">Scan</button>
</div>

<input id="qrText" placeholder="Type text or link"
oninput="makeQR()"
style="width:100%;padding:12px;border-radius:12px;border:2px solid #553f38;background:#2a1f1d;color:white">

<div id="qrBox" style="margin-top:15px;background:white;padding:15px;border-radius:15px"></div>
</div>

<!-- SCAN -->
<div id="scanSec" class="section">
<div class="header"><button class="back" onclick="openSec('qrSec')">‚Üê Back</button></div>
<div id="scanner"></div>
<label class="file-btn" for="imgQR">üñºÔ∏è Gallery</label>
<input type="file" id="imgQR" accept="image/*" hidden>
<div class="result" id="scanRes">Waiting...</div>
</div>

<!-- VIDEO -->
<div id="videoSec" class="section">
<div class="header"><button class="back" onclick="goHome()">‚Üê Back</button></div>

<div id="playerBox">
<video id="video" controls></video>
</div>

<input type="file" multiple accept="video/*" onchange="loadVideos(event)">
<div id="videoList"></div>
</div>

<!-- CALCULATOR -->
<div id="calcSec" class="section">
<div class="header"><button class="back" onclick="goHome()">‚Üê Back</button></div>
<div class="calc-box">
<div class="screen" id="disp">0</div>
<div class="grid">
<button class="btn ac" onclick="clr()">AC</button>
<button class="btn func" onclick="add('/')">√∑</button>
<button class="btn func" onclick="add('*')">√ó</button>
<button class="btn num" onclick="bk()">‚å´</button>

<button class="btn num" onclick="add('7')">7</button>
<button class="btn num" onclick="add('8')">8</button>
<button class="btn num" onclick="add('9')">9</button>
<button class="btn func" onclick="add('-')">‚àí</button>

<button class="btn num" onclick="add('4')">4</button>
<button class="btn num" onclick="add('5')">5</button>
<button class="btn num" onclick="add('6')">6</button>
<button class="btn func" onclick="add('+')">+</button>

<button class="btn num" onclick="add('1')">1</button>
<button class="btn num" onclick="add('2')">2</button>
<button class="btn num" onclick="add('3')">3</button>
<button class="btn eq" onclick="calc()">=</button>

<button class="btn num" style="grid-column:span 2;border-radius:40px" onclick="add('0')">0</button>
<button class="btn num" onclick="add('.')">.</button>
</div>
</div>
</div>

<script>
/* Navigation */
function openSec(id){
document.getElementById("home").style.display="none";
document.querySelectorAll(".section").forEach(s=>s.style.display="none");
document.getElementById(id).style.display="block";
if(id==="scanSec")startScan();else stopScan();
}
function goHome(){
document.getElementById("home").style.display="flex";
document.querySelectorAll(".section").forEach(s=>s.style.display="none");
stopScan();
}

/* QR Generate */
const qr=new QRCode(document.getElementById("qrBox"),{width:200,height:200});
function makeQR(){
qr.clear();
let t=document.getElementById("qrText").value.trim();
if(t)qr.makeCode(t);
}

/* Scanner */
let scanner=null;
function startScan(){
scanner=new Html5Qrcode("scanner");
scanner.start({facingMode:"environment"},{fps:10,qrbox:250},
txt=>document.getElementById("scanRes").innerText=txt
).catch(()=>{});
}
function stopScan(){
if(scanner&&scanner.isScanning)scanner.stop().catch(()=>{});
}
document.getElementById("imgQR").addEventListener("change",e=>{
let f=e.target.files[0];
if(!f)return;
if(!scanner)scanner=new Html5Qrcode("scanner");
scanner.scanFile(f,true)
.then(t=>document.getElementById("scanRes").innerText=t)
.catch(()=>document.getElementById("scanRes").innerText="‚ùå QR detect ‡¶π‡ßü‡¶®‡¶ø");
});

/* Video */
let videos=[],idx=0;
function loadVideos(e){
videos=[...e.target.files];
let list=document.getElementById("videoList");
list.innerHTML="";
videos.forEach((v,i)=>{
let d=document.createElement("div");
d.className="video-item";
d.innerText=v.name;
d.onclick=()=>playVideo(i);
list.appendChild(d);
});
}
function playVideo(i){
idx=i;
let v=document.getElementById("video");
v.src=URL.createObjectURL(videos[i]);
document.getElementById("playerBox").style.display="block";
v.play();
}

/* Calculator */
function add(v){
let d=document.getElementById("disp");
d.innerText=d.innerText==="0"?v:d.innerText+v;
}
function clr(){document.getElementById("disp").innerText="0";}
function bk(){
let d=document.getElementById("disp");
d.innerText=d.innerText.length>1?d.innerText.slice(0,-1):"0";
}
function calc(){
let d=document.getElementById("disp");
try{d.innerText=eval(d.innerText);}catch{d.innerText="Error";}
}
</script>

</body>
</html>
